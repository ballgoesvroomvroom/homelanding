<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10.0, minimum-scale=1, user-scalable=yes"/>
		<meta name="description" content=":)"/>

		<link rel="icon" type="image/x-icon" href="">
		<link rel="stylesheet" href="/css/includes/reset.css">
		<link rel="stylesheet" href="/css/views/hotel_promotions.css">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<title>Dusk | Promotions</title>
	</head>
	<body>
		<div id="topbar-container">
			<img id="comp-logo" src="/hotel_assets/icon.svg">
			<div id="topbar-right-container">
				<button id="topbar-member-login-btn">
					<img src="/hotel_assets/account_icon.svg">
					Member sign in
				</button>
				<button id="topbar-booknow-btn">
					BOOK NOW
				</button>
			</div>
		</div>
		<div id="frontpage-container">
			<div id="carousel-container">
			</div>
			<div id="greeter-container">
				<h1 id="page-header">PROMOTIONS</h1>
				<p id="page-caption">Ever changing promotions all year round. View the latest promotions ongoing.</p>

				<div id="content-searchbar">
					<label for="promo-content-search">Search by keyword</label>
					<div id="content-searchbar-input-container">
						<input id="content-searchbar-input-query" name="promo-content-search" type="text">
						<input id="content-searchbar-filter-date" name="promo-content-date" type="date">
						<select id="content-searchbar-filter-category" name="promo-content-category">
							<option value="dining">Dining</option>
							<option value="accommodation">Accommodation</option>
							<option value="events">Events</option>
							<option value="wedding">Wedding</option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<nav id="greeter-anchorjump">
			<p><a href="#dining">Dining</a> | <a href="#accommodation">Accommodation</a> |  <a href="#events">Events</a> | <a href="#wedding">Wedding</a></p>
		</nav>
		<div id="content-container">
			<section class="section-container" id="dining">
				<div class="section-header-container">
					<h2>Dining</h2>
				</div>
				<div class="section-content-container">
					<p>Have a go at our finely-curated asian culinary dishes.</p>
					<div class="promo-card-grid-container">
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
						</div>
					</div>
				</div>
			</section>
			<section class="section-container" id="accommodation">
				<div class="section-header-container">
					<h2>Accommodation</h2>
				</div>
				<div class="section-content-container">
					<p>Cozy yet luxurious room stays.</p>
					<div class="promo-card-grid-container">
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn" id="2023HT2NDP20OFF">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
						</div>
					</div>
				</div>
			</section>
			<section class="section-container" id="events">
				<div class="section-header-container">
					<h2>Events</h2>
				</div>
				<div class="section-content-container">
					<p>Cozy yet luxurious room stays.</p>
					<div class="promo-card-grid-container">
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn" id="2023HT2NDP20OFF">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
						</div>
					</div>
				</div>
			</section>
			<section class="section-container" id="wedding">
				<div class="section-header-container">
					<h2>Wedding</h2>
				</div>
				<div class="section-content-container">
					<p>Cozy yet luxurious room stays.</p>
					<div class="promo-card-grid-container">
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
							<div class="promo-card-top-container">
								<div class="promo-card-thumbnail"></div>
								<div class="promo-card-specs-container">
									<p class="promo-card-specs-date">19/2/23 - 24/2/23</p>
									<p class="promo-card-specs-tc">While stock lasts</p>
									<p class="promo-card-specs-tc">Terms & conditions apply</p>
								</div>
							</div>
							<div class="promo-card-details">
								<h3>20% High Tea for 2nd Pax</h3>
								<button class="promo-card-view-more-btn" id="2023HT2NDP20OFF">
									VIEW MORE
								</button>
							</div>
						</div>
						<div class="promo-card">
						</div>
					</div>
				</div>
			</section>
		</div>

		<div id="modal-window" class="hidden">
			<div id="modal-container">
				<div id="modal-content-thumbnail">
				</div>
				<div id="modal-content">
					<div id="modal-content-left">
						<h2 id="modal-content-header"></h2>
						<div id="modal-content-description">
							<p id="modal-content-desciption-p"></p>
						</div>
					</div>
					<div id="modal-content-right">
						<div id="modal-content-details">
							<p id="modal-content-details-promo-date">14/02/2023 - 21/02/2023</p>
						</div>
						<button id="modal-content-close-btn">Close</button>
					</div>
				</div>
			</div>
		</div>

		<!-- CREDITS
			https://svgsilh.com/image/37726.html
		-->
	</body>
	<script>
		// promotions entry
		const promotionsDataConds = {
			"WSL": "While stocks last",
			"MEO": "Members exclusive only",
			"TCA": "Tems & conds. apply",
			"LTSS": "Limited to selected suites"
		}
		const promotionsData = {
			"2023HT2NDP20OFF": {
				name: "20% Off 2nd Pax for High Tea",
				description: "2nd pax dine at a discounted price of 65.90++ (U.P. 82.75++)\nLimited to only one second for a table",
				date: "14/05/23 - 21/05/23",
				conds: {
					"WSL", "MEO", "TCA"
				}
			},
			"UOB10OFF": {
				name: "10% Off Rooms w/ UOB Card",
				description: "10% off for regular rooms when you pay with UOB card",
				date: "01/01/23 - 01/06/23",
				conds: {
					"LTSS", "TCA"
				}
			}
		}

		// references
		var modalWindow = document.getElementById("modal-window")

		// modal object
		const modal = {
			window: modalWindow,
			container: document.getElementById("modal-container"),

			header: document.getElementById("modal-content-header"),
			description: document.getElementById("modal-content-desciption-p")
		}

		modal.toggleOpen = function(open) {
			// open: boolean
			if (open) {
				modalWindow.classList.remove("hidden")
			} else {
				modalWindow.classList.add("hidden")
			}
		}

		modal.loadDescription = function(id) {
			// returns true if loading was successful
			var data = promotionsData[id]
			if (data == null) {
				// no matching ids
				return false
			}

			// load title
			this.header.innerHTML = data.name
			this.description.innerHTML = data.description.replaceAll("\n", "<br>")

			// return true
			return true
		}
		//

		// set min-date for date input (content-searchbar)
		document.getElementById("content-searchbar-filter-date").setAttribute("min", new Date().toISOString().split("T")[0])

		// promo card view more
		var promoTriggerBtns = document.getElementsByClassName("promo-card-view-more-btn")
		for (let i = 0; i < promoTriggerBtns.length; i++) {
			var ele = promoTriggerBtns[i]
			ele.addEventListener("click", e => {
				console.log("LOADING WITH ID", e.target.id)
				if (modal.loadDescription(e.target.id)) {
					modal.toggleOpen(true)
				}
			})
		}

		// modal close interactors
		modal.window.addEventListener("click", e => {
			modal.toggleOpen(false)
		})
		document.getElementById("modal-content-close-btn").addEventListener("click", e => {
			e.stopPropagation() // prevent event to bubble to modal-window (double triggers in this case)
			modal.toggleOpen(false)
		})
		modal.container.addEventListener("click", e => {
			e.stopPropagation() // prevent event to bubble to modal-window (triggers close in this case)
		})
	</script>
</html>